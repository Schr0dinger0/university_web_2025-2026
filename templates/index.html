<!DOCTYPE html>
<html>
<head>
    <title>Сравнение смартфонов</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Добавляем блок пользователя -->
    <div class="user-container" id="userContainer">
        <button id="loginBtn" class="login-btn">Войти</button>
        <div id="userGreeting" class="user-greeting" style="display: none;">
            <span id="userNameDisplay"></span>
            <div class="dropdown-menu">
                <button id="logoutBtn">Выйти</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно входа/регистрации -->
    <div id="authModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>

            <!-- Форма входа -->
            <div id="loginForm">
                <h3>Вход</h3>
                <input type="text" id="loginUsername" placeholder="Логин">
                <input type="password" id="loginPassword" placeholder="Пароль">
                <button id="submitLogin">Войти</button>
                <button id="switchToRegister">Регистрация</button>
            </div>

            <!-- Форма регистрации -->
            <div id="registerForm" style="display: none;">
                <h3>Регистрация</h3>
                <input type="text" id="registerUsername" placeholder="Логин">
                <input type="password" id="registerPassword" placeholder="Пароль">
                <input type="text" id="registerName" placeholder="Имя">
                <button id="submitRegister">Зарегистрироваться</button>
                <button id="switchToLogin">Войти в существующий аккаунт</button>
            </div>
        </div>
    </div>

    <header>
        <h1 align="center">Каталог смартфонов</h1>
    </header>

    <div class="container">
        <!-- Кнопка для открытия/закрытия фильтров -->
        <button class="filter-toggle" onclick="toggleFilters()">▶</button>

        <!-- Боковая панель фильтров -->
        <div class="filters-sidebar" id="filtersSidebar">
            <div class="filters-header">
                <h3>Фильтры</h3>
                <button class="close-filters" onclick="toggleFilters()">×</button>
            </div>

            <!-- Поиск по названию -->
            <div class="filter-group">
                <label>Поиск по названию</label>
                <input type="text" id="searchName" placeholder="Введите название..." oninput="filterPhones()">
            </div>

            <!-- Фильтр по бренду -->
            <div class="filter-group">
                <label>Бренд</label>
                <select id="filterBrand" onchange="filterPhones()">
                    <option value="">Все бренды</option>
                    <option value="Apple">Apple</option>
                    <option value="Samsung">Samsung</option>
                    <option value="Google">Google</option>
                    <option value="Xiaomi">Xiaomi</option>
                    <option value="OnePlus">OnePlus</option>
                    <option value="Nothing">Nothing</option>
                    <option value="Huawei">Huawei</option>
                    <option value="Realme">Realme</option>
                    <option value="Vivo">Vivo</option>
                    <option value="Asus">Asus</option>
                    <option value="Honor">Honor</option>
                    <option value="Sony">Sony</option>
                </select>
            </div>

             <!-- Фильтр по ОС -->
            <div class="filter-group">
                <label>Операционная система</label>
                <select id="filterOS" onchange="filterPhones()">
                    <option value="">Все ОС</option>
                    <option value="iOS">iOS</option>
                    <option value="Android">Android</option>
                    <option value="HarmonyOS">HarmonyOS</option>
                </select>
            </div>

            <!-- Ползунок цены -->
            <div class="filter-group">
                <label>Цена, ₽</label>
                <div class="range-inputs">
                    <input type="number" id="priceMin" placeholder="От" oninput="filterPhones()">
                    <span>-</span>
                    <input type="number" id="priceMax" placeholder="До" oninput="filterPhones()">
                </div>
            </div>

            <!-- Ползунок диагонали экрана -->
            <div class="filter-group">
                <label>Диагональ экрана, "</label>
                <div class="range-inputs">
                    <input type="number" id="screenMin" placeholder="От" step="0.1" oninput="filterPhones()">
                    <span>-</span>
                    <input type="number" id="screenMax" placeholder="До" step="0.1" oninput="filterPhones()">
                </div>
            </div>

            <!-- Фильтр по году -->
            <div class="filter-group">
                <label>Год выпуска</label>
                <select id="filterYear" onchange="filterPhones()">
                    <option value="">Все годы</option>
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                </select>
            </div>

            <!-- Кнопка сброса -->
            <button class="reset-filters" onclick="resetFilters()">Сбросить фильтры</button>
        </div>

        <!-- Основной контент с карточками -->
        <div class="main-content">
            <div class="phones-grid" id="phonesGrid">
                {% for phone in phones %}
                <div class="phone-card"

                     data-name="{{ phone.name.lower() }}"
                     data-brand="{{ phone.brand }}"
                     data-os="{{ phone.os }}"
                     data-year="{{ phone.year }}"
                     data-price="{{ phone.price.replace(' ₽', '').replace(' ', '').replace('₽', '').replace(' ', '') }}"
                     data-screen="{{ phone.screen.split(' ')[-1].replace('&quot;', '').replace('&apos;&apos;', '') }}">
                    <div class="phone-image"></div>
                    <div class="phone-info">
                        <h3 class="phone-name">{{ phone.name }}</h3>
                        <div class="phone-meta">
                            <span class="phone-brand">{{ phone.brand }}</span>
                            <span class="phone-year">{{ phone.year }}</span>
                        </div>
                        <div class="phone-specs">
                            <span class="phone-os">{{ phone.shell }}</span>
                            <span class="phone-screen">{{ phone.screen }}</span>
                        </div>
                        <div class="phone-storage">{{ phone.storage }}</div>
                        <div class="phone-colors">
                            {% for color in phone.colors %}
                            <div class="color-dot" style="background-color: {{ color }};" title="Цвет"></div>
                            {% endfor %}
                        </div>
                        <div class="phone-price">{{ phone.price }}</div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>